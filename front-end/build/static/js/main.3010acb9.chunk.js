(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),l=t(27),r=t.n(l),c=t(18),m=t(2),i=t(3),o=t(5),u=t(4),d=t(6),h=t(7),p=t(112),b=t(48),E=t(109),g=t(111),f=t(11),v=(t(68),t(110)),N=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).toggleNavbar=t.toggleNavbar.bind(Object(h.a)(Object(h.a)(t))),t.state={collapsed:!0},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this.props,a=e.isAdmin,t=e.isAuthed,n=e.logout,l=this.state.collapsed,r=l?"collapse navbar-collapse":"collapse navbar-collapse show",c=l?"navbar-toggler navbar-toggler-right collapsed":"navbar-toggler navbar-toggler-right";return s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light nav"},s.a.createElement("div",{className:"container"},s.a.createElement("button",{onClick:this.toggleNavbar,className:"".concat(c),type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"".concat(r),id:"navbarResponsive"},s.a.createElement("ul",{className:"navbar-nav mx-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.a,{exact:!0,className:"nav-link",to:"/"},"Home")),s.a.createElement("li",{className:"nav-item"},!t&&s.a.createElement(v.a,{className:"nav-link",to:"/login"},"Login")),s.a.createElement("li",{className:"nav-item"},!t&&s.a.createElement(v.a,{className:"nav-link",to:"/register"},"Register")),s.a.createElement("li",{className:"nav-item"},t&&s.a.createElement(v.a,{className:"nav-link",to:"/logout",onClick:n},"Logout")),s.a.createElement("li",{className:"nav-item"},a&&s.a.createElement(v.a,{className:"nav-link",to:"/create"},"Create")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.a,{className:"nav-link",to:"/about"},"About")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.a,{className:"nav-link",to:"/all"},"All Posts"))))))}}]),a}(n.Component),y=function(e){var a=e.isAdmin,t=e.isAuthed,n=e.logout;return s.a.createElement("header",{role:"banner"},s.a.createElement("div",{className:"top-bar"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-9 social"},s.a.createElement(v.a,{to:"/#"},s.a.createElement("span",{className:"fa fa-twitter"})),s.a.createElement(v.a,{to:"/#"},s.a.createElement("span",{className:"fa fa-facebook"})),s.a.createElement(v.a,{to:"/#"},s.a.createElement("span",{className:"fa fa-instagram"})),s.a.createElement(v.a,{to:"/#"},s.a.createElement("span",{className:"fa fa-youtube-play"})))))),s.a.createElement("div",{className:"container logo-wrap"},s.a.createElement("div",{className:"row pt-5"},s.a.createElement("div",{className:"col-12 text-center"},s.a.createElement(v.a,{className:"absolute-toggle d-block d-md-none","data-toggle":"collapse",to:"#navbarMenu",role:"button","aria-expanded":"true","aria-controls":"navbarMenu"},s.a.createElement("span",{className:"burger-lines"})),s.a.createElement("img",{className:"mb-4",src:"/images/react-logo.png",alt:"react-logo",width:96,height:96}),s.a.createElement("h1",{className:"site-logo"},s.a.createElement(v.a,{to:"/"},"My Awesome React Blog"))))),s.a.createElement(N,{isAuthed:t,isAdmin:a,logout:n}))},j=function(e){var a=e.posts;return s.a.createElement("div",{className:"col-md-7"},s.a.createElement("h3",null,"Latest Posts"),s.a.createElement("div",{className:"post-entry-sidebar"},s.a.createElement("ul",null,a.slice(0,3).map(function(a){return s.a.createElement("li",{key:a._id},s.a.createElement(v.a,{to:"/posts/"+a._id},s.a.createElement("img",{src:a.imageUrl,alt:"placeholder",className:"mr-4"}),s.a.createElement("div",{className:"text"},s.a.createElement("h4",null,a.title),s.a.createElement("div",{className:"post-meta"},s.a.createElement("span",{className:"mr-2"},e.formatDate(a.creationDate))," \u2022"))))}))))},O=function(e){return s.a.createElement("footer",{className:"site-footer"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mb-5"},s.a.createElement("div",{className:"col-md-4"},s.a.createElement("h3",null,"About Us"),s.a.createElement("p",{className:"mb-4"},s.a.createElement("img",{src:"images/img_1.jpg",alt:"placeholder",className:"img-fluid"})),s.a.createElement("p",null,"Lorem ipsum dolor sit amet sa ksal sk sa, consectetur adipisicing elit. Ipsa harum inventore reiciendis.",s.a.createElement(v.a,{to:"/about"},"Read More"))),s.a.createElement("div",{className:"col-md-6 ml-auto"},s.a.createElement("div",{className:"row"},s.a.createElement(j,Object.assign({},e,{formatDate:e.formatDate})),s.a.createElement("div",{className:"col-md-1"}),s.a.createElement("div",{className:"col-md-4"},s.a.createElement("div",{className:"mb-5"},s.a.createElement("h3",null,"Get Social"),s.a.createElement("ul",{className:"list-unstyled footer-social"},s.a.createElement("li",null,s.a.createElement("a",{href:"/#"},s.a.createElement("span",{className:"fa fa-twitter"})," Twitter")),s.a.createElement("li",null,s.a.createElement("a",{href:"/#"},s.a.createElement("span",{className:"fa fa-facebook"})," Facebook")),s.a.createElement("li",null,s.a.createElement("a",{href:"/#"},s.a.createElement("span",{className:"fa fa-instagram"})," Instagram")),s.a.createElement("li",null,s.a.createElement("a",{href:"/#"},s.a.createElement("span",{className:"fa fa-vimeo"})," Vimeo")),s.a.createElement("li",null,s.a.createElement("a",{href:"/#"},s.a.createElement("span",{className:"fa fa-youtube-play"})," Youtube")),s.a.createElement("li",null,s.a.createElement("a",{href:"/#"},s.a.createElement("span",{className:"fa fa-snapchat"})," Snapshot")))))))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 text-center"},s.a.createElement("p",{className:"small"},"\xa9 2019 Atanas Yonkov | Template by ",s.a.createElement("a",{href:"https://colorlib.com",target:"_blank",rel:"noopener noreferrer"},"Colorlib"))))))},C=function(e){var a=e.posts;return s.a.createElement("div",{className:"sidebar-box"},s.a.createElement("h3",{className:"heading"},"Latest Posts"),s.a.createElement("div",{className:"post-entry-sidebar"},s.a.createElement("ul",null,a.slice(0,3).map(function(a){return s.a.createElement("li",{key:a._id},s.a.createElement(v.a,{to:"/posts/"+a._id},s.a.createElement("img",{src:a.imageUrl,alt:"Image placeholder",className:"mr-4"}),s.a.createElement("div",{className:"text"},s.a.createElement("h4",null,a.title),s.a.createElement("div",{className:"post-meta"},s.a.createElement("span",{className:"mr-2"},e.formatDate(a.creationDate))))))}))))},S=function(e){return s.a.createElement("div",{className:"col-md-12 col-lg-4 sidebar"},s.a.createElement("div",{className:"sidebar-box search-form-wrap"},s.a.createElement("form",{className:"search-form",onSubmit:function(a){return e.handleSearchSubmit(a)}},s.a.createElement("div",{className:"form-group"},s.a.createElement("span",{className:"icon fa fa-search"}),s.a.createElement("input",{type:"text",className:"form-control",onChange:e.handleChange,name:"search",id:"s",placeholder:"Search.."})))),s.a.createElement("div",{className:"sidebar-box"},s.a.createElement("div",{className:"bio text-center"},s.a.createElement("img",{src:"images/atanas-yonkov.jpg",alt:"Image Placeholder",className:"img-fluid"}),s.a.createElement("div",{className:"bio-body"},s.a.createElement("h2",null,"Atanas Yonkov"),s.a.createElement("p",null,"Hi, my name is Atanas Yonkov. I am a blogger, web developer and React enthusiast. In this blog you can find up-to-date and useful information about our favourite JS framework!"),s.a.createElement("p",null,s.a.createElement(v.a,{to:"/about",className:"btn btn-primary btn-sm rounded"},"Read my bio")),s.a.createElement("p",{className:"social"},s.a.createElement("a",{href:"/#",className:"p-2"},s.a.createElement("span",{className:"fa fa-facebook"})),s.a.createElement("a",{href:"/#",className:"p-2"},s.a.createElement("span",{className:"fa fa-twitter"})),s.a.createElement("a",{href:"/#",className:"p-2"},s.a.createElement("span",{className:"fa fa-instagram"})),s.a.createElement("a",{href:"/#",className:"p-2"},s.a.createElement("span",{className:"fa fa-youtube-play"})))))),s.a.createElement(C,Object.assign({},e,{formatDate:e.formatDate})))},k=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("section",{className:"site-section py-sm"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement("h2",{className:"mb-4"},"Latest Posts"))),s.a.createElement("div",{className:"row blog-entries"},s.a.createElement("div",{className:"col-md-12 col-lg-8 main-content"},s.a.createElement("div",{className:"row"},this.props.posts.slice(0,4).map(function(a){return s.a.createElement("div",{key:a._id,className:"col-md-6"},s.a.createElement(v.a,{to:"/posts/"+a._id,className:"blog-entry element-animate fadeIn element-animated","data-animate-effect":"fadeIn"},s.a.createElement("img",{src:a.imageUrl,alt:"featured"}),s.a.createElement("div",{className:"blog-content-body"},s.a.createElement("div",{className:"post-meta"},s.a.createElement("span",{className:"author mr-2"},s.a.createElement("img",{src:"images/atanas-yonkov.jpg",alt:"author"})," ",a.author.username),"\u2022",s.a.createElement("span",{className:"mr-2"},e.props.formatDate(a.creationDate)," ")),s.a.createElement("h2",null,a.title))))}))),s.a.createElement(S,{posts:this.props.posts,handleSearchSubmit:this.props.handleSearchSubmit,handleChange:this.props.handleChange,formatDate:this.props.formatDate})))))}}]),a}(n.Component),w=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={userId:null,username:null,password:null},t.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(t))),t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("main",{className:"text-center form"},s.a.createElement("form",{className:"submit-form",onSubmit:function(a){return e.props.handleSubmit(a,e.state,!1)}},s.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Log in"),s.a.createElement("label",{htmlFor:"inputUsername",className:"sr-only"},"Username"),s.a.createElement("input",{type:"text",onChange:this.handleChange,id:"inputUsername",name:"username",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}),s.a.createElement("label",{htmlFor:"inputPassword",className:"sr-only"},"Password"),s.a.createElement("input",{type:"password",onChange:this.handleChange,id:"inputPassword",name:"password",className:"form-control",placeholder:"Password",required:!0}),s.a.createElement("div",{className:"checkbox mb-3"},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",defaultValue:"remember-me"})," Remember me")),s.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Sign in")),s.a.createElement("div",null,s.a.createElement("span",{className:"txt1"},"Don\u2019t have an account?"),s.a.createElement(v.a,{to:"/register",className:"txt2"}," Sign up")))}}]),a}(n.Component),A=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={userId:null,username:null,password:null},t.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(t))),t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("main",{className:"text-center form"},s.a.createElement("form",{className:"submit-form",onSubmit:function(a){return e.props.handleSubmit(a,e.state,!0)}},s.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Register"),s.a.createElement("label",{htmlFor:"inputUsername",className:"sr-only"},"Username"),s.a.createElement("input",{type:"username",onChange:this.handleChange,id:"inputUsername",name:"username",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}),s.a.createElement("label",{htmlFor:"inputEmail",className:"sr-only"},"Email address"),s.a.createElement("input",{type:"email",onChange:this.handleChange,id:"inputEmail",name:"email",className:"form-control",placeholder:"Email address",required:!0,autoFocus:!0}),s.a.createElement("label",{htmlFor:"inputPassword",className:"sr-only"},"Password"),s.a.createElement("input",{type:"password",onChange:this.handleChange,id:"inputPassword",name:"password",className:"form-control",placeholder:"Password",required:!0}),s.a.createElement("div",{className:"checkbox mb-3"},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",defaultValue:"remember-me"})," Remember me")),s.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Register")),s.a.createElement("div",null,s.a.createElement("span",{className:"txt1"},"Already have an account?"),s.a.createElement(v.a,{to:"/login",className:"txt2"}," Sign in")))}}]),a}(n.Component),D=function(e){return s.a.createElement("section",{className:"site-section pt-5"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row blog-entries"},s.a.createElement("div",{className:"col-md-12 col-lg-8 main-content"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("h2",{className:"mb-4"},"Hi There! I'm Atanas Yonkov"),s.a.createElement("p",{className:"mb-5"},s.a.createElement("img",{src:"images/img_6.jpg",alt:"Image placeholder",className:"img-fluid"})),s.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ipsum minima eveniet recusandae suscipit eum laboriosam fugit amet deleniti iste et. Ad dolores, necessitatibus non saepe tenetur impedit commodi quibusdam natus repellat, exercitationem accusantium perferendis officiis. Laboriosam impedit quia minus pariatur!"),s.a.createElement("p",null,"Dignissimos iste consectetur, nemo magnam nulla suscipit eius quibusdam, quo aperiam quia quae est explicabo nostrum ab aliquid vitae obcaecati tenetur beatae animi fugiat officia id ipsam sint? Obcaecati ea nisi fugit assumenda error totam molestiae saepe fugiat officiis quam?"),s.a.createElement("p",null,"Culpa porro quod doloribus dolore sint. Distinctio facilis ullam voluptas nemo voluptatum saepe repudiandae adipisci officiis, explicabo eaque itaque sed necessitatibus, fuga, ea eius et aliquam dignissimos repellendus impedit pariatur voluptates. Dicta perferendis assumenda, nihil placeat, illum quibusdam. Vel, incidunt?"),s.a.createElement("p",null,"Dolorum blanditiis illum quo quaerat, possimus praesentium perferendis! Quod autem optio nobis, placeat officiis dolorem praesentium odit. Vel, cum, a. Adipisci eligendi eaque laudantium dicta tenetur quod, pariatur sunt sed natus officia fuga accusamus reprehenderit ratione, provident possimus ut voluptatum.")))),s.a.createElement(S,e))))},x=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={title:null,imageUrl:null,content:null,author:localStorage.getItem("userId")},t.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(t))),t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("main",{className:"text-center form"},s.a.createElement("div",{className:"form-wrapper"},s.a.createElement("h1",null,"Create New Post"),s.a.createElement("form",{className:"submit-form",onSubmit:function(a){return e.props.handleSubmit(a,e.state)}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"title"},"Title"),s.a.createElement("input",{type:"text",onChange:this.handleChange,name:"title",id:"title",className:"form-control "})),s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"description"},"Featured Image Url"),s.a.createElement("input",{type:"text",onChange:this.handleChange,name:"imageUrl",id:"imageUrl",className:"form-control "}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"content"},"Content"),s.a.createElement("textarea",{name:"content",onChange:this.handleChange,id:"content",className:"form-control ",cols:30,rows:8,defaultValue:""}))),s.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Create"))))}}]),a}(n.Component),P=t(49),I=t.n(P),U=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={post:null,comm:null},t.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(t))),t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.posts,t=e.match;this.setState({post:a.length?a.find(function(e){return e._id===t.params.id}):null,userId:localStorage.getItem("userId")})}},{key:"componentDidUpdate",value:function(e){var a=this.props,t=a.posts,n=a.match;a.isAuthed;JSON.stringify(e)!==JSON.stringify(this.props)&&this.setState({post:t.length?t.find(function(e){return e._id===n.params.id}):null})}},{key:"render",value:function(){var e=this,a=this.state.post,t=this.props,n=t.isAdmin,l=t.isAuthed;return a?s.a.createElement("section",{className:"site-section py-lg"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row blog-entries"},s.a.createElement("div",{className:"col-md-12 col-lg-8 main-content"},s.a.createElement("img",{src:a.imageUrl,alt:"image placeholder",className:"img-fluid mb-5"}),s.a.createElement("div",{className:"post-meta"},s.a.createElement("span",{className:"author mr-2"},s.a.createElement("img",{src:"/images/atanas-yonkov.jpg",alt:"pic",className:"mr-2"}),a.author.username),"\u2022",s.a.createElement("span",{className:"mr-2"},this.props.formatDate(a.creationDate)," ")," \u2022",s.a.createElement("span",{className:"ml-2"},s.a.createElement("span",{className:"fa fa-comments"})," 3")),n&&s.a.createElement(v.a,{to:n&&"/edit/"+this.props.match.params.id},"edit post "),n&&s.a.createElement(v.a,{to:"/delete/"+this.props.match.params.id},"delete post"),s.a.createElement("h1",{className:"mb-4"},a.title),s.a.createElement("div",{className:"post-content-body"},s.a.createElement("div",{className:"row mb-5"}),I()(a.content)),s.a.createElement("div",{className:"pt-5"},s.a.createElement("h3",{className:"mb-5"},"Comments"),s.a.createElement("ul",{className:"comment-list"},a.comments.map(function(a){return s.a.createElement("li",{key:a._id,className:"comment"},s.a.createElement("div",{className:"vcard"},s.a.createElement("img",{src:"/images/person_1.jpg",alt:"Image placeholder"})),s.a.createElement("div",{className:"comment-body"},s.a.createElement("h3",null,a.author.username),s.a.createElement("div",{className:"meta"},e.props.formatDate(a.creationDate)),s.a.createElement("p",null,a.comment),s.a.createElement("p",null,s.a.createElement("a",{href:"#",className:"reply rounded"},"Reply"))))})),s.a.createElement("div",{className:"comment-form-wrap pt-5"},l?s.a.createElement("h3",{className:"mb-5"},"Leave a comment"):s.a.createElement("h3",{className:"mb-5"},"Please ",s.a.createElement(v.a,{to:"/login"},"log in")," or ",s.a.createElement(v.a,{to:"/register"},"register")," to post a comment"),l&&s.a.createElement("form",{onSubmit:function(a){return e.props.handleSubmit(a,e.state)},className:"p-5 bg-light"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"message"},"Message"),s.a.createElement("textarea",{name:"comment",id:"message",onChange:this.handleChange,cols:30,rows:10,className:"form-control",defaultValue:""})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"submit",defaultValue:"Post Comment",className:"btn btn-primary"}))))))))):s.a.createElement("span",{className:"spinner"},"Loading ...")}}]),a}(n.Component),F=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).isAdmin=t.props.isAdmin,t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return this.isAdmin?s.a.createElement(b.a,this.props,this.props.children):s.a.createElement(E.a,{to:"/login"})}}]),a}(n.Component),q=t(28),_=t.n(q),R=t(29),L=t(50),M=function(e){return function(){var a=Object(L.a)(_.a.mark(function a(t,n,s){var l,r,c;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=window.localStorage.getItem("jwtoken"),r={Authorization:"Bearer "+l},a.next=4,fetch(t,Object(R.a)({method:e,headers:Object(R.a)({},r,{"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify(n)},s));case 4:return c=a.sent,a.abrupt("return",c.json());case 6:case"end":return a.stop()}},a)}));return function(e,t,n){return a.apply(this,arguments)}}()},V=M("get"),G=M("post"),T=function(e){function a(){return Object(m.a)(this,a),Object(o.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"getPost",value:function(e){return V("/feed/posts",e)}},{key:"createPost",value:function(e){return G("/feed/post/create",e)}},{key:"editGet",value:function(e){return V("/feed/post/edit/".concat(e))}},{key:"editPost",value:function(e){return G("/feed/post/edit/".concat(e.id),e.data)}},{key:"deleteGet",value:function(e){return V("/feed/post/delete/".concat(e))}},{key:"deletePost",value:function(e){return G("/feed/post/delete/".concat(e.id),e.data)}}]),a}(s.a.Component),Y=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={title:"",imageUrl:"",content:""},t.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(t))),t.PostService=new T,t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.editGet()}},{key:"componentDidUpdate",value:function(e,a){a.title,this.state.title}},{key:"editGet",value:function(){var e=this;this.PostService.editGet(this.props.match.params.id).then(function(a){a.post&&e.setState({title:a.post.title,imageUrl:a.post.imageUrl,content:a.post.content})}).catch(function(e){return console.error(e)})}},{key:"editPost",value:function(e,a){var t=this;e.preventDefault(),this.props.isAdmin&&this.PostService.editPost({id:this.props.match.params.id,data:a}).then(function(e){e.errors?console.log(e.message):(f.toast.success(e.message),t.props.history.push("/"))}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this;return s.a.createElement("main",{className:"text-center form"},s.a.createElement("div",{className:"form-wrapper"},s.a.createElement("h1",null,"Edit Post"),s.a.createElement("form",{className:"submit-form",onSubmit:function(a){return e.editPost(a,e.state)}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"title"},"Title"),s.a.createElement("input",{type:"text",onChange:this.handleChange,name:"title",value:this.state.title,id:"title",className:"form-control "})),s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"description"},"Featured image"),s.a.createElement("input",{type:"text",onChange:this.handleChange,name:"imageUrl",value:this.state.imageUrl,id:"imageUrl",className:"form-control "}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"content"},"Content"),s.a.createElement("textarea",{name:"content",value:this.state.content,onChange:this.handleChange,id:"content",className:"form-control ",cols:30,rows:8,defaultValue:""}))),s.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Edit"))))}}]),a}(n.Component),J=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={id:null,title:null,imageUrl:null,content:null},t.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(t))),t.PostService=new T,t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.deleteGet()}},{key:"deleteGet",value:function(){var e=this;this.PostService.deleteGet(this.props.match.params.id).then(function(a){a.post&&e.setState({id:a.post.id,title:a.post.title,imageUrl:a.post.imageUrl,content:a.post.content})}).catch(function(e){return console.error(e)})}},{key:"deletePost",value:function(e,a){var t=this;e.preventDefault(),this.props.isAdmin&&this.PostService.deletePost({id:this.props.match.params.id,data:a}).then(function(e){e.errors?f.toast.error(e.message):(f.toast.success(e.message),t.props.history.push("/"))}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this;return s.a.createElement("main",{className:"text-center form"},s.a.createElement("div",{className:"form-wrapper"},s.a.createElement("h1",null,"Delete Post"),s.a.createElement("form",{className:"submit-form",onSubmit:function(a){return e.deletePost(a,e.state)}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"title"},"Title"),s.a.createElement("input",{type:"text",onChange:this.handleChange,name:"title",value:this.state.title,id:"title",className:"form-control",disabled:!0})),s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"description"},"Featured image"),s.a.createElement("input",{type:"text",onChange:this.handleChange,name:"imageUrl",value:this.state.imageUrl,id:"imageUrl",className:"form-control",disabled:!0}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 form-group"},s.a.createElement("label",{htmlFor:"content"},"Content"),s.a.createElement("textarea",{name:"content",value:this.state.content,onChange:this.handleChange,id:"content",className:"form-control ",cols:30,rows:8,defaultValue:"",disabled:!0}))),s.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Delete"))))}}]),a}(n.Component),B=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("section",{className:"site-section pt-5"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row blog-entries"},s.a.createElement("div",{className:"col-md-12 col-lg-8 main-content"},s.a.createElement("div",{className:"col-md-12 mb-5"},s.a.createElement("h2",null,"All Posts")),this.props.posts.map(function(a){return s.a.createElement("div",{key:a._id,className:"col-md-12"},s.a.createElement("div",{className:"post-entry-horzontal"},s.a.createElement(v.a,{to:"/posts/"+a._id},s.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(a.imageUrl,")")}}),s.a.createElement("span",{className:"text"},s.a.createElement("div",{className:"post-meta"},s.a.createElement("span",{className:"author mr-2"},s.a.createElement("img",{src:"images/atanas-yonkov.jpg",alt:"pic placeholder"})," ",a.author.username),"\u2022",s.a.createElement("span",{className:"mr-2"},e.props.formatDate(a.creationDate)," ")," \u2022"),s.a.createElement("h2",null,a.title)))))})),s.a.createElement(S,{posts:this.props.posts,handleSearchSubmit:this.props.handleSearchSubmit,handleChange:this.props.handleChange,formatDate:this.props.formatDate}))))}}]),a}(n.Component),H=function(e){function a(){return Object(m.a)(this,a),Object(o.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"auth",value:function(e,a){return G("/auth/sign"+(a?"up":"in"),e)}}]),a}(s.a.Component),z=function(e){function a(){return Object(m.a)(this,a),Object(o.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"createComment",value:function(e){return G("/feed/comment/create",e)}}]),a}(s.a.Component),Q=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).updateUser=function(e){e.username?(t.setState({userId:e.userId,username:e.username,isAdmin:e.isAdmin,isAuthed:!!e.username,jwtoken:e.token}),localStorage.setItem("userId",e.userId),localStorage.setItem("username",e.username),localStorage.setItem("isAdmin",e.isAdmin),localStorage.setItem("isAuthed",!!e.username),localStorage.setItem("jwtoken",e.token),f.toast.success("Welcome, "+e.username),t.props.history.push("/")):f.toast.error(e.message)},t.state={userId:null,username:null,isAdmin:!1,isAuthed:!1,jwtoken:null,posts:[],filtered:[]},t.handleSubmit=t.handleSubmit.bind(Object(h.a)(Object(h.a)(t))),t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e="true"===localStorage.getItem("isAdmin"),a=!!localStorage.getItem("username");a&&this.setState({userId:localStorage.getItem("userId"),username:localStorage.getItem("username"),isAdmin:e,isAuthed:a}),this.getPosts()}},{key:"componentDidUpdate",value:function(e,a,t){a!==this.state&&this.getPosts()}},{key:"formatDate",value:function(e){var a=new Date(e),t=""+(a.getMonth()+1),n=""+a.getDate(),s=a.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[s,t,n].join("-")}},{key:"handleChange",value:function(e,a){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"handleSearchChange",value:function(e,a){var t=this.state.posts,n=[],s=[];e.target.value&&(n=e.target.value,s=t.filter(function(e){return e.title.toLowerCase().includes(n)}),this.setState({posts:s}))}},{key:"handleSearchSubmit",value:function(e){e.preventDefault()}},{key:"handleSubmit",value:function(e,t,n){var s=this;e.preventDefault(),a.authService.auth(t,n).then(function(e){s.updateUser(e)}).catch(function(e){return console.log(e)})}},{key:"handleCreateSubmit",value:function(e,t){var n=this;e.preventDefault(),this.state.isAdmin&&a.postService.createPost(t).then(function(e){e.Post?(f.toast.success(e.message),n.props.history.push("/")):f.toast.error(e.message)}).catch(function(e){return console.error(e)})}},{key:"handleCommentSubmit",value:function(e,t){e.preventDefault(),e.target.reset(),a.commentService.createComment(t).then(function(e){e.errors?f.toast.error(e.message):f.toast.success(e.message)}).catch(function(e){return console.error(e)})}},{key:"getPosts",value:function(){var e=this;a.postService.getPost().then(function(a){e.setState({posts:a.posts.length?a.posts:[]})}).catch(function(a){return e.setState({e:a})})}},{key:"logout",value:function(){this.setState({userId:null,username:null,isAdmin:!1,isAuthed:!1}),localStorage.clear(),f.toast.success("You have been successfully logged out!")}},{key:"render",value:function(){var e=this;return s.a.createElement(n.Fragment,null,s.a.createElement(f.ToastContainer,null),s.a.createElement(y,{username:this.state.username,isAdmin:this.state.isAdmin,isAuthed:this.state.isAuthed,logout:this.logout.bind(this)}),s.a.createElement(p.a,null,s.a.createElement(b.a,{exact:!0,path:"/",render:function(a){return s.a.createElement(k,Object.assign({posts:e.state.posts,handleSearchSubmit:e.handleSearchSubmit.bind(e),handleChange:e.handleSearchChange.bind(e),formatDate:e.formatDate},a))}}),s.a.createElement(b.a,{path:"/login",render:function(a){return e.state.isAuthed?s.a.createElement(E.a,{to:"/"}):s.a.createElement(w,Object.assign({handleSubmit:e.handleSubmit.bind(e),handleChange:e.handleChange,history:e.props.history},a))}}),s.a.createElement(b.a,{path:"/register",render:function(a){return e.state.isAuthed?s.a.createElement(E.a,{to:"/"}):s.a.createElement(A,Object.assign({handleSubmit:e.handleSubmit.bind(e),handleChange:e.handleChange,history:e.props.history},a))}}),s.a.createElement(b.a,{path:"/logout",render:function(e){return s.a.createElement(E.a,{to:"/login"})}}),";",s.a.createElement(F,{path:"/create",isAdmin:this.state.isAdmin,render:function(a){return s.a.createElement(x,Object.assign({handleSubmit:e.handleCreateSubmit.bind(e),handleChange:e.handleChange,history:e.props.history},a))}}),s.a.createElement(b.a,{path:"/posts/:id",render:function(a){return s.a.createElement(U,Object.assign({handleSubmit:e.handleCommentSubmit.bind(e),isAdmin:e.state.isAdmin,isAuthed:e.state.isAuthed,posts:e.state.posts,handleChange:e.handleChange,formatDate:e.formatDate},a))}}),s.a.createElement(F,{path:"/edit/:id",isAdmin:this.state.isAdmin,render:function(a){return s.a.createElement(Y,Object.assign({isAdmin:e.state.isAdmin,getPosts:e.getPosts.bind(e),handleChange:e.handleChange,history:e.props.history},a))}}),s.a.createElement(F,{path:"/delete/:id",isAdmin:this.state.isAdmin,render:function(a){return s.a.createElement(J,Object.assign({isAdmin:e.state.isAdmin,handleChange:e.handleChange,history:e.props.history},a))}}),s.a.createElement(b.a,{path:"/about",render:function(a){return s.a.createElement(D,Object.assign({posts:e.state.posts,handleChange:e.handleSearchChange.bind(e),formatDate:e.formatDate},a))}}),s.a.createElement(b.a,{path:"/all",render:function(a){return s.a.createElement(B,Object.assign({posts:e.state.posts,handleSearchSubmit:e.handleSearchSubmit.bind(e),handleChange:e.handleSearchChange.bind(e),formatDate:e.formatDate},a))}})),s.a.createElement(O,{posts:this.state.posts,formatDate:this.formatDate}))}}]),a}(n.Component);Q.authService=new H,Q.postService=new T,Q.commentService=new z;var W=Object(g.a)(Q),K=t(108);r.a.render(s.a.createElement(K.a,null,s.a.createElement(W,null)),document.getElementById("root"))},52:function(e,a,t){e.exports=t(107)},87:function(e,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.3010acb9.chunk.js.map